![gulp logo](gulp.png)
# GulpPack by EvanLongin version 1.1!
##### Update version 1.1: added webpack-stream for js-bundles, fix css bugs

## Оглавление
1. [Структура папок](#структура-папок)
2. [Инициализация и начало работы](#инициализация-и-начало-работы)
3. [Команды запуска сборки и npm-скриптов](#команды-запуска-сборки-и-npm-скриптов)
4. [Работа с HTML](#работа-с-html)
5. [Работа с (S)CSS](#работа-с-scss)
6. [Работа с JavaScript](#работа-с-javascript)
6. [Работа с изображениями (кроме SVG)](#работа-с-изображениями-кроме-svg)
7. [Работа с SVG](#работа-с-svg)
8. [Работа со шрифтами](#работа-со-шрифтами)
9. [Swiper](#swiper)

## Структура папок
Проект имеет структуру вида:

### dev/ - папка разработки &#8594.
#### ./css - папка с основным файлом стилей.
#### ./fonts - папка со шрифтами.
#### ./html - папка с html-файлами.
#### ./images - папка с изображениями.
#### ./js - папка с javascript-файлами.
#### ./scss - папка с scss-файлами.
#### ./index.html - основной html-файл.
***
### dist/ - папка для скомпилированного проекта.
***
#### ./gulpfile.js - файл с настройками и функциями gulp.
#### ./package.json - файл со списком установленных пакетов.
#### ./README.md - этот файл Вы читаете в данный момент :)
#### ./webpack.config.js - файл настройки webpack.
***
## Инициализация и начало работы
Для начала работы со сборкой следует скопировать содержимое репозитория на компьютер с помощью команды:

```git clone https://github.com/Longin89/gulpPack.git```

и после этого в папке сборки выполнить команду:
```npm i```

## Команды запуска сборки и npm-скриптов
```gulp``` - запуск сборки в режиме разработки. В этом режиме запускается BrowserSync (для отслеживания изменений онлайн), а так-же функции из файла **gulpfile.js** для работы с проектом. Все файлы (кроме изображений и [main.bundle.js](#работа-с-javascript)) в папке **dev/** не минифицируются и не конкатенируются.

```gulp build``` - запуск сборки в режиме production. В этом режиме проект компилируется в папку **dist/** для передачи заказчику, либо загрузки на хостинг. Файлы стилей, html-документы и изображения минифицируются, файлы js проходят через webpack и Babel, минифицируются и конкатенируются.

```gulp backend``` (**тестовая функция**) - запуск сборки в режиме backend. В этом режиме сборка из папки **dev/** в папку **dist/** с конкатенированными файлами стилей, html и js. Минификация к файлам не применяется, изображения оптимизируются.

```fonts``` - конвертация шрифтов из ttf в woff2. Исходники шрифтов следует положить в папку **dev/fonts/src**. После выполнения команды искомые шрифты появятся в папке **dev/fonts**

```zipfiles``` - архивация папки **dist/**. Одноименный архив сохраняется в корне проекта.

```npm run html``` - скрипт проверки html-файлов на W3C-валидаторе. Проверяются все файлы, находящиеся в корне папки **dev/**.

## Работа с HTML
В основную страницу с помощью плагина *[gulp-file-include](https://www.npmjs.com/package/gulp-file-include)*  уже вставлены части(**partials**) других файлов (```footer.html```, ```head.html```, ```footer.html```). Встраивание в документ происходит с помощью директивы ```@@include``` (например ```@@include('partials/head.html')```). Вы так-же можете создавать свои страницы и оперировать с ними тем-же образом.

**Важно!** Для корректной работы сборки все html-файлы должны находится в директории **dev/html**.

**Важно №2** В файле ```head.html``` помимо стандартных настроек прописан тэг вида ```<link rel="preload"...``` - он нужен для предзагрузки используемых Вами шрифтов, необходимо прописать туда полное имя файла(ов), находящихся в папке **dev/fonts**. Предзагрузка опциональна, при желании отключается простым удалением тэга.

## Работа с (S)CSS
Для работы используется препроцессор sass в синтаксисе scss. Во время процесса разработки, работа со стилями происходит в директории **dev/scss**. файлы в которой, в свою очередь разделены на секции:

**style.scss** - основной файл стилей, в который по умолчанию импортируются все остальные.

**./components/_defaults.scss** - файл со стилями по умолчанию для базового проекта (как то - ширина ограничительного контейнера, размер и семейство базового шрифта, прижатие футера к низу страницы и т.д.)

**./components/_fonts.scss** - файл, в который через директиву ```@incliude``` импортируются пользовательские шрифты.

**./components/_footer.scss** - файл для "подвала" проекта.

**./components/_header.scss** - файл для "шапки" проекта.

**./components/_mixins.scss** - файл для хранения "примесей". По умолчанию уже хранит в себе миксина для быстрого добавления / использования шрифтов, а так-же градиентов.

**./components/_normalize.scss** - файл нормализации, версия 8.0.1.

**./components/_vars.scss** - файл для хранения переменных.

При разработке проекта, компилируемый на выходе **style.min.css** хранит в себе стили из всех вышеперечисленных файлов в неминифицированном виде. Отдельным файлом создается **style.min.css.map**, содержащий в себе карты стилей, полученные с помощью плагина *[gulp-sourcemaps](https://www.npmjs.com/package/gulp-sourcemaps)*.

## Работа с JavaScript
Для работы с js в сборке используется webpack и babel. Файлы так-же разделены на секции:

**main.js** - основной файл для разработки, не прошедший через webpack и babel.

**main.bundle.js** - основной файл после webpack, babel и конкатенации.

**./components/_functions.js** - файл для хранения функций.

**./components/_vars.js** - файл для хранения переменных.

Для js так-же создаются карты с помощью *[gulp-sourcemaps](https://www.npmjs.com/package/gulp-sourcemaps)*.

## Работа с изображениями (кроме SVG)
Все изображения (кроме ```*.svg``` и ```*.ico```) следует помещать в папку **dev/images/src** - на выходе в папке **dev/images** Вы будете получать оптимизированные файлы в форматах ```*.jpeg``` и ```*.webp```.
Для добавления изображения на страницу используйте тэг ```<img>``` - при компиляции документа он, с помощью *[gulp-webp-html](https://www.npmjs.com/package/gulp-webp-html)* будет преобразован в тэг ```<picture>```, в котором, в зависимости от поддержки браузера будет использован ```jpeg``` или ```webp```-файл.

## Работа с SVG
Для конвертации SVG-файлов используется папка **dev/images/src/svg** - в нее помещаются исходники, которые после запуска разработки конвертируются и помещаются в папку **dev/images/svg_out**

## Работа со шрифтами
С помощью плагина *[gulp-ttf2woff2](https://www.npmjs.com/package/gulp-ttf2woff2)* в сборке реализована возможность конвертации шрифтов из ttf в woff2 (описана [выше](#команды-запуска-сборки-и-npm-скриптов)). Рекомендуется подготавливать шрифты заранее.

## Swiper
В сборку добавлен Swiper v.10.3.1, для его подключения раскомментируйте  строки **53** и **89** в файле **gulpfile.js**

## PS
Это моя первая сборка, идею позаимствовал у *[MaxGraph](https://github.com/maxdenaro)* (надеюсь, что он не против и спасибо ему).
Сборка по возможности будет допиливаться, пополняться, обо всех проблемах просьба сообщать в issues.
Peace <3